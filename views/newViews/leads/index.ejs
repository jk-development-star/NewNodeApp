<link
  rel="stylesheet"
  href="/newAssets/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css"
/>
<link
  rel="stylesheet"
  href="/newAssets/plugins/datatables-responsive/css/responsive.bootstrap4.min.css"
/>
<link
  rel="stylesheet"
  href="/newAssets/plugins/datatables-buttons/css/buttons.bootstrap4.min.css"
/>
<style>
  .btn {
    background-color: DodgerBlue;
    border: none;
    color: white;
    padding: 12px 16px;
    font-size: 16px;
    cursor: pointer;
  }

  /* Darker background on mouse-over */
  .btn:hover {
    background-color: RoyalBlue;
  }
  a {
    margin-left: 10px;
  }
  .action {
    width: 120px;
  }
</style>
<section class="content-header">
  <div class="container-fluid">
    <div class="row mb-2">
      <div class="col-sm-6">
        <h1>Lead List</h1>
      </div>
      <div class="col-sm-6">
        <ol class="breadcrumb float-sm-right">
          <li class="breadcrumb-item"><a href="/dashboard">Home</a></li>
          <li class="breadcrumb-item active">Lead List</li>
        </ol>
      </div>
    </div>
  </div>
  <!-- /.container-fluid -->
</section>
<!-- Main content -->
<section class="content">
  <div class="container-fluid">
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Lead List</h3>
            <a href="/create/lead" class="btn-sm btn-primary float-right"
              ><i class="fa fa-plus"></i> Add New Lead</a
            >
          </div>
          <% if(messages.success) { %>
          <div class="alert alert-success alert-dismissible" role="alert">
            <%= messages.success %>
          </div>
          <% } %> <% if(messages.error) { %>
          <div class="alert alert-danger alert-dismissible" role="alert">
            <%= messages.error %>
          </div>
          <% } %>
          <!-- /.card-header -->
          <div class="card-body">
            <table id="example1" class="table table-bordered table-striped">
              <thead>
                <tr>
                  <th>Lead Number</th>
                  <th>Details Of Lead</th>
                  <th>Budget(Rupee)</th>
                  <th>Status</th>
                  <th>Generated By</th>
                  <th>Assigned To</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <% if(leads.length > 0) { %> <% leads.forEach(function (lead) {
                %>
                <tr>
                  <td><%= lead.lead_id %></td>
                  <td><%= lead.description%></td>
                  <td>
                    <%= new Intl.NumberFormat('en-IN', {
                    maximumSignificantDigits: 3, style: 'currency', currency:
                    'INR' }).format(lead.lead_budget) %>
                  </td>
                  <td><%= lead.lead_status %></td>
                  <td><%= lead.generatedBy.full_name %></td>
                  <td><%= lead.assignedTo.full_name %></td>
                  <td style="display: inline">
                    <a
                      href="/view/<%= lead._id %>"
                      class="btn-sm btn-info"
                      data-toggle="tooltip"
                      data-placement="bottom"
                      title="View lead"
                      ><i class="fa fa-eye"></i
                    ></a>
                    <a
                      href="/edit/<%= lead._id %>"
                      class="btn-sm btn-primary"
                      data-toggle="tooltip"
                      data-placement="bottom"
                      title="Edit lead"
                      ><i class="fa fa-edit"></i
                    ></a>
                    <a
                      href="#"
                      value="delete/<%= lead._id %>"
                      class="btn-sm btn-danger delete"
                      data-toggle="tooltip"
                      data-placement="bottom"
                      title="Delete lead"
                    >
                      <i class="fa fa-trash"></i>
                    </a>
                  </td>
                </tr>
                <% }) %> <% } %>
              </tbody>
            </table>
          </div>
          <!-- /.card-body -->
        </div>
        <!-- /.card -->
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->
  </div>
  <!-- /.container-fluid -->
</section>

<script src="/newAssets/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="/newAssets/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="/newAssets/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="/newAssets/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="/newAssets/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="/newAssets/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="/newAssets/plugins/jszip/jszip.min.js"></script>
<script src="/newAssets/plugins/pdfmake/pdfmake.min.js"></script>
<script src="/newAssets/plugins/pdfmake/vfs_fonts.js"></script>
<script src="/newAssets/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="/newAssets/plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="/newAssets/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<!-- AdminLTE App -->
<script src="/newAssets/dist/js/adminlte.min.js"></script>
<script src="/newAssets/js/user.delete.js"></script>

<script>
  $(function () {
    $("#example1")
      .DataTable({
        responsive: true,
        lengthChange: false,
        autoWidth: false,
        // buttons: ["copy", "csv", "excel", "pdf", "print", "colvis"],
      })
      .buttons()
      .container()
      .appendTo("#example1_wrapper .col-md-6:eq(0)");
    $("#example2").DataTable({
      paging: true,
      lengthChange: false,
      searching: false,
      ordering: true,
      info: true,
      autoWidth: false,
      responsive: true,
    });
  });
</script>
